{"version":3,"sources":["../../../app/v1/controllers/invoiceController.js"],"names":["COSTOKM","InvoiceController","req","res","Invoice","getAll","rows","length","status","json","message","invoices","create","tripId","id","riderId","pasajero_id","driverId","conductor_id","cost","distance","impuesto","invoice"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AAEA,IAAMA,OAAO,GAAG,GAAhB;;IAEqBC,iB;;;;;;;;2HACSC,G,EAAKC,G;;;;;;;;uBACRC,oBAAQC,MAAR,E;;;;AAAfC,gBAAAA,I,yBAAAA,I;iDACDA,IAAI,CAACC,MAAL,GAAc,CAAd,GACHJ,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,kBAAAA,OAAO,EAAE;AAAV,iBAArB,CADG,GAC+EP,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,IAArB,C;;;;;;;;;;;;;;;;;;;2HAG7DJ,G,EAAKC,G;;;;;;AACtBQ,gBAAAA,Q,GAAaT,G,CAAbS,Q;;uBACcP,oBAAQQ,MAAR,CAAe;AACnCC,kBAAAA,MAAM,EAAEC,EAD2B;AAEnCC,kBAAAA,OAAO,EAAEJ,QAAQ,CAACK,WAFiB;AAGnCC,kBAAAA,QAAQ,EAAEN,QAAQ,CAACO,YAHgB;AAInCC,kBAAAA,IAAI,EAAEC,QAAQ,GAAGpB,OAAX,GAAsBoB,QAAQ,GAAGpB,OAAX,GAAqB,GAJd;AAKnCqB,kBAAAA,QAAQ,EAAEF,IAAI,GAAG;AALkB,iBAAf,C;;;AAAhBG,gBAAAA,O;;AAON,oBAAIA,OAAJ,EAAa;AACXnB,kBAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,oBAAAA,OAAO,EAAE;AAAV,mBAArB;AACD,iBAFD,MAEO;AACLP,kBAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,oBAAAA,OAAO,EAAE;AAAV,mBAArB;AACD","sourcesContent":["import Invoice from \"../database/Invoice\";\n\nconst COSTOKM = 700;\n\nexport default class InvoiceController {\n  static async getAllInvoices(req, res) {\n    const { rows } = await Invoice.getAll();\n    return rows.length < 1\n      ? res.status(404).json({message: \"No existen facturas en la base de datos !!!\",}) : res.status(200).json(rows);\n  }\n\n  static async createInvoice(req, res) {\n    const { invoices } = req;\n    const invoice = await Invoice.create({\n      tripId: id,\n      riderId: invoices.pasajero_id,\n      driverId: invoices.conductor_id,\n      cost: distance * COSTOKM + (distance * COSTOKM * 0.1),\n      impuesto: cost * 0.1\n    });    \n    if (invoice) {\n      res.status(200).json({message: \"Factura creada con exito !!!\"});\n    } else {\n      res.status(500).json({message: \"No fue posible agregar la factura en la base de datos !!!\"});\n    }\n  }\n\n}\n"],"file":"invoiceController.js"}